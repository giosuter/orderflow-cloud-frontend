<!-- src/app/orders-list.component.html -->

<div class="orders-page">

  <header class="orders-header">
    <h1>Orders</h1>
    <button type="button" class="btn btn-primary" (click)="onReload()" [disabled]="loading">
      {{ loading ? 'Loading…' : 'Reload' }}
    </button>
  </header>

  <!-- Error message (if any) -->
  <div *ngIf="errorMessage" class="alert alert-error">
    {{ errorMessage }}
  </div>

  <!-- Filter bar -->
  <section class="filter-bar">
    <label for="codeFilter">Filter by code:</label>
    <input
      id="codeFilter"
      type="text"
      [(ngModel)]="codeFilter"
      (input)="onFilterChange()"
      placeholder="Enter code substring…"
    />
  </section>

  <!-- Loading indicator -->
  <p *ngIf="loading && !errorMessage" class="loading-text">
    Loading orders…
  </p>

  <!-- Empty state -->
  <p *ngIf="!loading && !errorMessage && filteredOrders.length === 0" class="empty-text">
    No orders found.
  </p>

  <!-- Orders table -->
  <div class="table-wrapper" *ngIf="!loading && filteredOrders.length > 0">
    <table class="orders-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Code</th>
          <th>Status</th>
          <th class="numeric">Total</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of filteredOrders">
          <td>{{ order.id }}</td>
          <td>{{ order.code }}</td>
          <td>
            <span class="status-pill" [ngClass]="'status-' + (order.status || 'UNKNOWN')">
              {{ order.status || 'UNKNOWN' }}
            </span>
          </td>
          <td class="numeric">
            {{ order.total | number:'1.2-2' }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>