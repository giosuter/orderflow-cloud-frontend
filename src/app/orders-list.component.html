<!-- src/app/orders-list.component.html -->
<div class="orders-page">
  <!-- Header with title and "New order" button -->
  <header class="orders-header">
    <div>
      <h1>{{ 'ORDERS.LIST.TITLE' | translate }}</h1>
      <p class="subtitle">{{ 'ORDERS.LIST.SUBTITLE' | translate }}</p>
    </div>

    <button type="button" class="btn btn-primary" (click)="onCreate()">
      {{ 'ORDERS.LIST.BUTTON_NEW' | translate }}
    </button>
  </header>

  <!-- Error message -->
  <div *ngIf="error" class="alert alert-error">
    {{ error }}
  </div>

  <!-- Filter bar -->
  <form (ngSubmit)="onSearch()" class="filter-bar">
    <span class="filter-label">
      {{ 'ORDERS.LIST.FILTER_LABEL' | translate }}
    </span>

    <!-- Code filter (used as free-text for customer name) -->
    <label for="codeFilter">
      {{ 'ORDERS.LIST.FILTER_CODE_LABEL' | translate }}
    </label>
    <input
      id="codeFilter"
      name="codeFilter"
      type="text"
      [(ngModel)]="filterCode"
      [placeholder]="'ORDERS.LIST.FILTER_CODE_PLACEHOLDER' | translate"
    />

    <!-- Status filter -->
    <label for="statusFilter">
      {{ 'ORDERS.LIST.FILTER_STATUS_LABEL' | translate }}
    </label>
    <select
      id="statusFilter"
      name="statusFilter"
      [(ngModel)]="filterStatus"
    >
      <option [ngValue]="''">
        {{ 'ORDERS.LIST.FILTER_STATUS_ALL' | translate }}
      </option>
      <option *ngFor="let s of statusOptions" [ngValue]="s">
        {{ ('ORDERS.STATUS.' + s) | translate }}
      </option>
    </select>

    <!-- Filter actions -->
    <button type="submit" class="btn">
      {{ 'ORDERS.LIST.BUTTON_APPLY' | translate }}
    </button>

    <button
      type="button"
      class="btn"
      (click)="onResetFilters()"
    >
      {{ 'ORDERS.LIST.BUTTON_RESET' | translate }}
    </button>
  </form>

  <!-- Loading / empty states -->
  <div *ngIf="loading" class="loading-text">
    {{ 'ORDERS.LIST.LOADING' | translate }}
  </div>

  <div
    *ngIf="!loading && filteredOrders.length === 0"
    class="empty-text"
  >
    {{ 'ORDERS.LIST.EMPTY' | translate }}
  </div>

  <!-- Table with orders -->
  <div class="table-wrapper" *ngIf="!loading && filteredOrders.length > 0">
    <table class="orders-table">
      <thead>
        <tr>
          <th>{{ 'ORDERS.LIST.COL_CODE' | translate }}</th>
          <th>{{ 'ORDERS.LIST.COL_CUSTOMER' | translate }}</th>
          <th>{{ 'ORDERS.LIST.COL_STATUS' | translate }}</th>
          <th class="numeric">
            {{ 'ORDERS.LIST.COL_TOTAL' | translate }}
          </th>
          <th>{{ 'ORDERS.LIST.COL_CREATED' | translate }}</th>
          <th class="actions">
            {{ 'ORDERS.LIST.COL_ACTIONS' | translate }}
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of filteredOrders">
          <td>{{ order.code }}</td>
          <td>{{ order.customerName || '—' }}</td>
          <td>
            <span
              class="status-pill"
              [ngClass]="'status_' + (order.status || 'UNKNOWN')"
            >
              {{
                ('ORDERS.STATUS.' + (order.status || 'UNKNOWN'))
                  | translate
              }}
            </span>
          </td>
          <td class="numeric">
            {{ order.total | number: '1.2-2' }}
          </td>
          <td>
            {{ order.createdAt || '—' }}
          </td>
          <td class="actions">
            <div class="action-buttons">
              <button
                type="button"
                class="btn-link"
                (click)="onView(order)"
              >
                {{ 'ORDERS.LIST.BUTTON_VIEW' | translate }}
              </button>
              <button
                type="button"
                class="btn-link"
                (click)="onEdit(order)"
              >
                {{ 'ORDERS.LIST.BUTTON_EDIT' | translate }}
              </button>
              <button
                type="button"
                class="btn-link btn-danger"
                (click)="onDelete(order)"
              >
                {{ 'ORDERS.LIST.BUTTON_DELETE' | translate }}
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Pagination bar -->
    <div class="pagination-bar">
      <div class="pagination-info">
        <!-- You can later i18n these texts if you want -->
        <span *ngIf="totalElements > 0">
          Showing {{ fromIndex }}–{{ toIndex }} of {{ totalElements }} orders
          (page {{ page + 1 }} of {{ totalPages }})
        </span>
        <span *ngIf="totalElements === 0">
          No orders to display.
        </span>
      </div>

      <div class="pagination-controls">
        <button
          type="button"
          class="btn"
          (click)="goToFirstPage()"
          [disabled]="!hasPreviousPage"
        >
          « First
        </button>

        <button
          type="button"
          class="btn"
          (click)="goToPreviousPage()"
          [disabled]="!hasPreviousPage"
        >
          ‹ Previous
        </button>

        <button
          type="button"
          class="btn"
          (click)="goToNextPage()"
          [disabled]="!hasNextPage"
        >
          Next ›
        </button>

        <button
          type="button"
          class="btn"
          (click)="goToLastPage()"
          [disabled]="!hasNextPage"
        >
          Last »
        </button>
      </div>
    </div>
  </div>
</div>