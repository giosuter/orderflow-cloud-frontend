<div class="order-new-page">
  <header class="order-new-header">
    <div>
      <h1>New order</h1>
      <p class="subtitle">Create a new order in OrderFlow Cloud</p>
    </div>

    <button type="button" class="btn" (click)="onCancel()">
      ← Back to orders
    </button>
  </header>

  <div *ngIf="error" class="alert alert-error">
    {{ error }}
  </div>

  <form (ngSubmit)="onSubmit()" #orderForm="ngForm" class="order-form">
    <!-- Code -->
    <div class="form-row">
      <label for="code">Code *</label>
      <input
        id="code"
        name="code"
        type="text"
        required
        [(ngModel)]="draft.code"
        #codeCtrl="ngModel"
      />
      <div class="field-error" *ngIf="codeCtrl.invalid && codeCtrl.touched">
        Code is required.
      </div>
    </div>

    <!-- Customer name -->
    <div class="form-row">
      <label for="customerName">Customer name *</label>
      <input
        id="customerName"
        name="customerName"
        type="text"
        required
        [(ngModel)]="draft.customerName"
        #customerCtrl="ngModel"
      />
      <div
        class="field-error"
        *ngIf="customerCtrl.invalid && customerCtrl.touched"
      >
        Customer name is required.
      </div>
    </div>

    <!-- Status -->
    <div class="form-row">
      <label for="status">Status</label>
      <select
        id="status"
        name="status"
        [(ngModel)]="draft.status"
      >
        <!-- Placeholder: mapped to '' in the model -->
        <option [ngValue]="''">-- Select status --</option>

        <!-- Real status values from the backend enum -->
        <option *ngFor="let s of statusOptions" [ngValue]="s">
          {{ s }}
        </option>
      </select>
    </div>

    <!-- Total -->
    <div class="form-row">
      <label for="total">Total amount</label>
      <input
        id="total"
        name="total"
        type="number"
        min="0"
        step="0.01"
        [(ngModel)]="draft.total"
      />
    </div>

    <!-- Form actions -->
    <div class="form-actions">
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="saving || orderForm.invalid"
      >
        {{ saving ? 'Saving…' : 'Save' }}
      </button>

      <button
        type="button"
        class="btn"
        (click)="onCancel()"
        [disabled]="saving"
      >
        Cancel
      </button>
    </div>
  </form>
</div>